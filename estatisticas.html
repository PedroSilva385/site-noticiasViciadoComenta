<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Estat√≠sticas - VICIADO COMENTA</title>
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
  <!-- Firebase SDK (Vers√£o compat√≠vel) -->
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>
  <script src="assets/firebase-config.js"></script>
  <script src="assets/news-scheduler.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;600;700&family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Sora', sans-serif;
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
      color: #1a1f3a;
      line-height: 1.6;
      min-height: 100vh;
      padding: 20px;
    }

    body.dark {
      background: #0f1419;
      color: #e5e7eb;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    header {
      background: linear-gradient(135deg, #0066cc 0%, #0052a3 100%);
      color: white;
      padding: 40px 20px;
      border-radius: 12px;
      text-align: center;
      margin-bottom: 40px;
      box-shadow: 0 8px 24px rgba(0, 102, 204, 0.15);
    }

    header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
      font-family: 'Outfit', sans-serif;
    }

    header p {
      font-size: 1.1em;
      opacity: 0.95;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .stat-card {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      text-align: center;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    body.dark .stat-card {
      background: #1f2937;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(0, 102, 204, 0.15);
    }

    .stat-icon {
      font-size: 3em;
      color: #0066cc;
      margin-bottom: 15px;
    }

    .stat-label {
      font-size: 0.9em;
      color: #6b7280;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    body.dark .stat-label {
      color: #9ca3af;
    }

    .stat-value {
      font-size: 2.5em;
      font-weight: 700;
      color: #1a1f3a;
      font-family: 'Outfit', sans-serif;
    }

    body.dark .stat-value {
      color: #ffffff;
    }

    .daily-stats {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    footer {
      margin-top: 40px;
      text-align: center;
      color: #6b7280;
    }

    body.dark footer {
      color: #9ca3af;
    }

    .footer-copy {
      text-align: center;
      width: 100%;
    }

    body.dark .daily-stats {
      background: #1f2937;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .daily-stats h2 {
      margin-bottom: 20px;
      color: #1a1f3a;
      font-size: 1.5em;
      font-family: 'Outfit', sans-serif;

      .data-list {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .data-item {
        display: flex;
        flex-direction: column;
        gap: 8px;
        padding: 20px;
        border-radius: 12px;
        background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
        border: 1px solid #e5e7eb;
        color: #1a1f3a;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      }

      .data-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 102, 204, 0.15);
        border-color: #0066cc;
      }

      body.dark .data-item {
        background: linear-gradient(135deg, #1a222f 0%, #16192c 100%);
        border-color: #2d3748;
        color: #e5e7eb;
      }

      body.dark .data-item:hover {
        box-shadow: 0 4px 12px rgba(96, 165, 250, 0.2);
        border-color: #60a5fa;
      }

      .data-item-title {
        font-weight: 700;
        font-size: 1.1em;
        color: #0066cc;
        line-height: 1.4;
      }

      body.dark .data-item-title {
        color: #60a5fa;
      }

      .data-item-meta {
        font-size: 0.85em;
        color: #6b7280;
        display: flex;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
      }

      .data-item-meta::before {
        content: 'üìä';
        font-size: 1em;
      }

      body.dark .data-item-meta {
        color: #9ca3af;
      }

      .data-item-text {
        font-size: 0.95em;
        color: #374151;
        line-height: 1.6;
        padding: 12px;
        background: #f9fafb;
        border-radius: 8px;
        border-left: 3px solid #0066cc;
      }

      body.dark .data-item-text {
        color: #d1d5db;
        background: #0f1419;
        border-left-color: #60a5fa;
      }
    }

    body.dark .daily-stats h2 {
      color: #ffffff;
    }

    .daily-item {
      display: flex;
      justify-content: space-between;
      padding: 15px 0;
      border-bottom: 1px solid #e5e7eb;
    }

    body.dark .daily-item {
      border-bottom-color: #374151;
    }

    .daily-item:last-child {
      border-bottom: none;
    }

    .daily-date {
      font-weight: 600;
      color: #0066cc;
    }

    .daily-count {
      font-weight: 700;
      color: #1a1f3a;
    }

    body.dark .daily-count {
      color: #ffffff;
    }

    .loading {
      text-align: center;
      padding: 40px;
      font-size: 1.2em;
      color: #6b7280;
    }

    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      border: 2px solid #0066cc;
      color: #0066cc;
      padding: 10px 15px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1.2em;
      z-index: 100;
    }

    body.dark .theme-toggle {
      background: #1f2937;
      color: #fbbf24;
      border-color: #fbbf24;
    }

    .back-link {
      display: inline-block;
      margin-bottom: 20px;
      color: #0066cc;
      text-decoration: none;
      font-weight: 600;
      transition: color 0.3s;
    }

    .back-link:hover {
      color: #0052a3;
    }

    body.dark .back-link {
      color: #60a5fa;
    }

    body.dark .back-link:hover {
      color: #93c5fd;
    }
  </style>
  <link rel="stylesheet" href="assets/consent-banner.css">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XJ3P1K6694"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('consent', 'default', {
      ad_storage: 'denied',
      ad_user_data: 'denied',
      ad_personalization: 'denied',
      analytics_storage: 'denied',
      wait_for_update: 2000
    });

    gtag('config', 'G-XJ3P1K6694');
  </script>
</head>
<body>
  <div id="cookie-banner" class="cookie-banner" role="dialog" aria-live="polite" aria-label="Consentimento de cookies" hidden>
    <div class="cookie-banner__content">
      <div class="cookie-banner__text">
        Usamos cookies para medir audi√™ncias e melhorar a experi√™ncia. Pode aceitar ou recusar. Saiba mais em
        <a href="politica-privacidade.html">Pol√≠tica de Privacidade</a>.
      </div>
      <div class="cookie-banner__actions">
        <button id="cookie-accept" class="cookie-banner__button cookie-banner__button--accept">Aceitar</button>
        <button id="cookie-reject" class="cookie-banner__button cookie-banner__button--reject">Recusar</button>
      </div>
    </div>
  </div>
  <script src="assets/consent-banner.js" defer></script>
  <button class="theme-toggle" onclick="toggleTheme()">
    <i class="fas fa-moon"></i>
  </button>

  <div class="container">
    <a href="index.html" class="back-link">‚Üê Voltar ao in√≠cio</a>

    <header>
      <h1>üìä Estat√≠sticas do Site</h1>
      <p>Acessos e atividade em tempo real</p>
    </header>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">üëÅÔ∏è</div>
        <div class="stat-label">Total de Acessos</div>
        <div class="stat-value" id="totalVisits">-</div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">üìÖ</div>
        <div class="stat-label">Acessos Hoje</div>
        <div class="stat-value" id="todayVisits">-</div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">üìÜ</div>
        <div class="stat-label">Acessos Este M√™s</div>
        <div class="stat-value" id="monthVisits">-</div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">üü¢</div>
        <div class="stat-label">Usu√°rios Ativos</div>
        <div class="stat-value" id="activeUsers">-</div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">üí¨</div>
        <div class="stat-label">Coment√°rios</div>
        <div class="stat-value" id="totalComments">-</div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">‚ù§Ô∏è</div>
        <div class="stat-label">Novos Likes (Hoje)</div>
        <div class="stat-value" id="newLikes">-</div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">‚è±Ô∏è</div>
        <div class="stat-label">√öltima Atualiza√ß√£o</div>
        <div class="stat-value" id="lastUpdate" style="font-size: 1.2em;">-</div>
      </div>
    </div>

    <div style="text-align: center; margin: 20px 0;">
      <button onclick="resetarEstatisticas()" style="background: #dc2626; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 1em; transition: all 0.3s;">
        üîÑ Resetar Estat√≠sticas
      </button>
    </div>

    <div class="daily-stats">
      <h2>üìà Acessos por Dia</h2>
      <div id="dailyList" class="loading">
        <p>Carregando dados...</p>
      </div>
    </div>

    <div class="daily-stats">
      <h2>üìÜ Acessos por M√™s</h2>
      <div id="monthlyList" class="loading">
        <p>Carregando dados...</p>
      </div>
    </div>

    <div class="daily-stats">
      <h2 style="display: flex; align-items: center; gap: 10px;">
        <span style="font-size: 1.4em;">üí¨</span>
        <span>Coment√°rios Recentes</span>
      </h2>
      <div id="commentsListStats" class="data-list">
        <div class="data-item" style="text-align: center; color: #6b7280;">
          <div class="loading" style="padding: 20px;">Carregando coment√°rios...</div>
        </div>
      </div>
    </div>

    <div class="daily-stats">
      <h2 style="display: flex; align-items: center; gap: 10px;">
        <span style="font-size: 1.4em;">‚ù§Ô∏è</span>
        <span>Likes por Artigo</span>
      </h2>
      <div id="likesByArticleList" class="data-list">
        <div class="data-item" style="text-align: center; color: #6b7280;">
          <div class="loading" style="padding: 20px;">Carregando likes...</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // CHAVE REMOVIDA POR SEGURAN√áA - Veja assets/firebase-config.js
    const database = firebase.database();
    let noticiasMap = {};

    function carregarNoticiasMap() {
      return fetchNoticiasAgendadas('data/noticias.json')
        .then((data) => {
          const map = {};
          if (data && Array.isArray(data.noticias)) {
            data.noticias.forEach((item) => {
              map[String(item.id)] = item.titulo || `Not√≠cia ${item.id}`;
            });
          }
          noticiasMap = map;
        })
        .catch(() => {
          noticiasMap = {};
        });
    }

    function getNoticiaTitle(noticiaId) {
      return noticiasMap[String(noticiaId)] || `Not√≠cia ${noticiaId}`;
    }

    // Carregar estat√≠sticas
    function carregarEstatisticas() {
      const statsRef = database.ref('site_stats');
      
      statsRef.on('value', (snapshot) => {
        const stats = snapshot.val() || {};

        const totalVisitsEl = document.getElementById('totalVisits');
        const todayVisitsEl = document.getElementById('todayVisits');
        const monthVisitsEl = document.getElementById('monthVisits');
        const lastUpdateEl = document.getElementById('lastUpdate');

        if (!totalVisitsEl || !todayVisitsEl || !monthVisitsEl || !lastUpdateEl) {
          return;
        }
        
        const toSafeNumber = (value) => {
          const num = Number(value);
          return Number.isFinite(num) ? num : 0;
        };

        // Total de acessos
        const totalVisits = toSafeNumber(stats.total_visits);
        totalVisitsEl.textContent = totalVisits.toLocaleString('pt-PT');
        
        // Acessos de hoje
        const hoje = new Date().toISOString().split('T')[0];
        const todayVisits = toSafeNumber(stats.daily && stats.daily[hoje]);
        todayVisitsEl.textContent = todayVisits;
        
        // Acessos do m√™s
        const mesAtual = new Date().toISOString().substring(0, 7);
        const monthVisits = toSafeNumber(stats.monthly && stats.monthly[mesAtual]);
        monthVisitsEl.textContent = monthVisits.toLocaleString('pt-PT');
        
        // √öltima atualiza√ß√£o
        if (stats.last_updated) {
          const date = new Date(stats.last_updated);
          const formattedDate = date.toLocaleString('pt-PT');
          lastUpdateEl.textContent = formattedDate;
        } else {
          lastUpdateEl.textContent = '-';
        }
        
        // Lista de acessos por dia
        const dailyList = document.getElementById('dailyList');
        const daily = stats.daily || {};
        const daysArray = Object.entries(daily).sort((a, b) => b[0].localeCompare(a[0]));
        
        if (daysArray.length === 0) {
          dailyList.textContent = 'Nenhum dado dispon√≠vel ainda.';
        } else {
          dailyList.textContent = '';
          daysArray.forEach(([date, count]) => {
            const dateObj = new Date(date + 'T00:00:00');
            const dayName = dateObj.toLocaleDateString('pt-PT', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

            const item = document.createElement('div');
            item.className = 'daily-item';

            const dateEl = document.createElement('span');
            dateEl.className = 'daily-date';
            dateEl.textContent = dayName;

            const countEl = document.createElement('span');
            countEl.className = 'daily-count';
            countEl.textContent = `${count} acesso${count !== 1 ? 's' : ''}`;

            item.appendChild(dateEl);
            item.appendChild(countEl);
            dailyList.appendChild(item);
          });
        }
        
        // Lista de acessos por m√™s
        const monthlyList = document.getElementById('monthlyList');
        const monthly = stats.monthly || {};
        const monthsArray = Object.entries(monthly).sort((a, b) => b[0].localeCompare(a[0]));
        
        if (monthsArray.length === 0) {
          monthlyList.textContent = 'Nenhum dado dispon√≠vel ainda.';
        } else {
          monthlyList.textContent = '';
          monthsArray.forEach(([month, count]) => {
            const [year, monthNum] = month.split('-');
            const monthName = new Date(year, monthNum - 1).toLocaleDateString('pt-PT', { year: 'numeric', month: 'long' });

            const item = document.createElement('div');
            item.className = 'daily-item';

            const dateEl = document.createElement('span');
            dateEl.className = 'daily-date';
            dateEl.textContent = monthName;

            const countEl = document.createElement('span');
            countEl.className = 'daily-count';
            countEl.textContent = `${count.toLocaleString('pt-PT')} acesso${count !== 1 ? 's' : ''}`;

            item.appendChild(dateEl);
            item.appendChild(countEl);
            monthlyList.appendChild(item);
          });
        }
      }, (error) => {
        console.error('Erro ao carregar estat√≠sticas:', error);
        const totalVisitsEl = document.getElementById('totalVisits');
        const todayVisitsEl = document.getElementById('todayVisits');
        const monthVisitsEl = document.getElementById('monthVisits');
        const lastUpdateEl = document.getElementById('lastUpdate');
        if (totalVisitsEl) totalVisitsEl.textContent = '-';
        if (todayVisitsEl) todayVisitsEl.textContent = '-';
        if (monthVisitsEl) monthVisitsEl.textContent = '-';
        if (lastUpdateEl) lastUpdateEl.textContent = '-';
      });
      
      // Monitorar usu√°rios ativos
      const activeUsersRef = database.ref('active_users');
      activeUsersRef.on('value', (snapshot) => {
        let activeUsers = 0;
        snapshot.forEach((child) => {
          const key = child.key || '';
          if (key.startsWith('fake_')) {
            return;
          }
          activeUsers += 1;
        });
        const activeUsersEl = document.getElementById('activeUsers');
        if (activeUsersEl) activeUsersEl.textContent = activeUsers;
      }, (error) => {
        console.error('Erro ao carregar utilizadores ativos:', error);
        const activeUsersEl = document.getElementById('activeUsers');
        if (activeUsersEl) activeUsersEl.textContent = '-';
      });

      // Monitorar total de coment√°rios (inclui respostas)
      const commentsRef = database.ref('comentarios');
      commentsRef.on('value', (snapshot) => {
        let totalComments = 0;
        const comentariosRecentes = [];

        snapshot.forEach((noticiaSnap) => {
          noticiaSnap.forEach((comentarioSnap) => {
            const comentarioVal = comentarioSnap.val() || {};
            const comentarioId = comentarioSnap.key;
            const noticiaId = noticiaSnap.key;
            totalComments += 1;

            comentariosRecentes.push({
              id: comentarioId,
              noticiaId,
              nome: comentarioVal.nome || 'An√≥nimo',
              texto: comentarioVal.texto || '',
              data: comentarioVal.data || '',
              timestamp: comentarioVal.timestamp || 0
            });

            const respostasSnap = comentarioSnap.child('respostas');
            if (respostasSnap.exists()) {
              respostasSnap.forEach((respostaSnap) => {
                totalComments += 1;

                const aninhadasSnap = respostaSnap.child('respostas');
                if (aninhadasSnap.exists()) {
                  aninhadasSnap.forEach(() => {
                    totalComments += 1;
                  });
                }
              });
            }
          });
        });

        const totalCommentsEl = document.getElementById('totalComments');
        if (totalCommentsEl) {
          totalCommentsEl.textContent = totalComments.toLocaleString('pt-PT');
        }

        const commentsListEl = document.getElementById('commentsListStats');
        if (commentsListEl) {
          commentsListEl.textContent = '';
          comentariosRecentes.sort((a, b) => b.timestamp - a.timestamp);
          const slice = comentariosRecentes.slice(0, 25);
          if (slice.length === 0) {
            const item = document.createElement('div');
            item.className = 'data-item';
            item.style.textAlign = 'center';
            item.style.color = '#6b7280';
            item.textContent = 'üì≠ Sem coment√°rios ainda.';
            commentsListEl.appendChild(item);
          } else {
            slice.forEach((comentario) => {
              const item = document.createElement('div');
              item.className = 'data-item';

              const title = document.createElement('div');
              title.className = 'data-item-title';
              title.innerHTML = `üì∞ ${getNoticiaTitle(comentario.noticiaId)}`;

              const meta = document.createElement('div');
              meta.className = 'data-item-meta';
              meta.innerHTML = `<strong>üë§ ${comentario.nome}</strong> ‚Ä¢ üïí ${comentario.data || 'sem data'}`;

              const text = document.createElement('div');
              text.className = 'data-item-text';
              const textoLimitado = comentario.texto.length > 150 
                ? comentario.texto.substring(0, 150) + '...' 
                : comentario.texto;
              text.textContent = textoLimitado;

              item.appendChild(title);
              item.appendChild(meta);
              item.appendChild(text);
              commentsListEl.appendChild(item);
            });
          }
        }
      }, (error) => {
        console.error('Erro ao carregar coment√°rios:', error);
        const totalCommentsEl = document.getElementById('totalComments');
        if (totalCommentsEl) totalCommentsEl.textContent = '-';
        const commentsListEl = document.getElementById('commentsListStats');
        if (commentsListEl) commentsListEl.textContent = 'Erro ao carregar coment√°rios.';
      });

      // Monitorar novos likes (hoje)
      const likesRef = database.ref('likes');
      likesRef.on('value', (snapshot) => {
        const now = new Date();
        const startOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();
        let newLikes = 0;
        const likesByArticle = [];

        snapshot.forEach((noticiaSnap) => {
          const noticiaId = noticiaSnap.key;
          let totalLikes = 0;
          let todayLikes = 0;

          noticiaSnap.forEach((likeSnap) => {
            const value = likeSnap.val();
            const timestamp = value && typeof value === 'object' ? value.timestamp : null;
            totalLikes += 1;
            if (typeof timestamp === 'number' && timestamp >= startOfDay) {
              newLikes += 1;
              todayLikes += 1;
            }
          });

          likesByArticle.push({
            noticiaId,
            totalLikes,
            todayLikes
          });
        });

        const newLikesEl = document.getElementById('newLikes');
        if (newLikesEl) {
          newLikesEl.textContent = newLikes.toLocaleString('pt-PT');
        }

        const likesListEl = document.getElementById('likesByArticleList');
        if (likesListEl) {
          likesListEl.textContent = '';
          likesByArticle.sort((a, b) => b.totalLikes - a.totalLikes);
          if (likesByArticle.length === 0) {
            const item = document.createElement('div');
            item.className = 'data-item';
            item.style.textAlign = 'center';
            item.style.color = '#6b7280';
            item.textContent = 'üíî Sem likes ainda.';
            likesListEl.appendChild(item);
          } else {
            likesByArticle.forEach((entry, index) => {
              const item = document.createElement('div');
              item.className = 'data-item';

              // Medal icons for top 3
              let rankIcon = '';
              if (index === 0) rankIcon = 'ü•á ';
              else if (index === 1) rankIcon = 'ü•à ';
              else if (index === 2) rankIcon = 'ü•â ';
              else rankIcon = `${index + 1}. `;

              const title = document.createElement('div');
              title.className = 'data-item-title';
              title.innerHTML = `${rankIcon}${getNoticiaTitle(entry.noticiaId)}`;

              const meta = document.createElement('div');
              meta.className = 'data-item-meta';
              meta.innerHTML = `<strong>‚ù§Ô∏è ${entry.totalLikes} likes totais</strong> ‚Ä¢ ‚≠ê ${entry.todayLikes} hoje`;

              item.appendChild(title);
              item.appendChild(meta);
              likesListEl.appendChild(item);
            });
          }
        }
      }, (error) => {
        console.error('Erro ao carregar likes:', error);
        const newLikesEl = document.getElementById('newLikes');
        if (newLikesEl) newLikesEl.textContent = '-';
        const likesListEl = document.getElementById('likesByArticleList');
        if (likesListEl) likesListEl.textContent = 'Erro ao carregar likes.';
      });
    }

    // Dark mode
    function toggleTheme() {
      document.body.classList.toggle('dark');
      localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
    }

    // Resetar estat√≠sticas
    function resetarEstatisticas() {
      if (confirm('‚ö†Ô∏è Tem a certeza que deseja resetar TODAS as estat√≠sticas? Esta a√ß√£o n√£o pode ser desfeita!')) {
        const statsRef = database.ref('site_stats');
        statsRef.set({
          total_visits: 0,
          daily: {},
          last_updated: new Date().toISOString()
        }).then(() => {
          alert('‚úÖ Estat√≠sticas resetadas com sucesso!');
          location.reload();
        }).catch((error) => {
          alert('‚ùå Erro ao resetar estat√≠sticas: ' + error.message);
        });
      }
    }

    // Carregar tema salvo
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark');
    }

    // Carregar dados ao iniciar
    carregarNoticiasMap().finally(() => carregarEstatisticas());
  </script>

  <footer>
    <div class="footer-copy">¬© 2026 Viciado Comenta. Todos os direitos reservados.</div>
  </footer>
</body>
</html>

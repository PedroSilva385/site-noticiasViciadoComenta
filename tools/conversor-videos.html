<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Conversor de Links - Viciado Comenta</title>
<link rel="icon" type="image/svg+xml" href="favicon.svg">
<link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;600;700&family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Sora', sans-serif;
  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
  color: #1a1f3a;
  line-height: 1.6;
  min-height: 100vh;
  padding: 20px;
}

body.dark {
  background: linear-gradient(135deg, #0f172a 0%, #111827 100%);
  color: #e5e7eb !important;
}

body.dark * {
  color: #e5e7eb !important;
}

.theme-toggle {
  position: fixed;
  top: 20px;
  right: 20px;
  background: transparent;
  border: 1px solid rgba(0, 0, 0, 0.1);
  color: #1a1f3a;
  padding: 10px 12px;
  border-radius: 8px;
  cursor: pointer;
  z-index: 150;
  font-size: 1.2em;
}

body.dark .theme-toggle {
  border-color: rgba(255, 255, 255, 0.2);
  color: #e5e7eb;
}

.theme-toggle:hover {
  background: rgba(0, 0, 0, 0.05);
}

body.dark .theme-toggle:hover {
  background: rgba(255, 255, 255, 0.05);
}

.container {
  max-width: 1000px;
  margin: 0 auto;
  padding: 20px 0;
}

.header {
  text-align: center;
  margin-bottom: 40px;
  padding: 30px 20px;
  background: linear-gradient(135deg, #0066cc 0%, #0052a3 100%);
  border-radius: 12px;
  color: #ffffff;
  box-shadow: 0 4px 16px rgba(0, 102, 204, 0.15);
}

.header h1 {
  font-family: 'Outfit', sans-serif;
  font-size: 2.2em;
  margin-bottom: 10px;
  font-weight: 700;
}

.header p {
  font-size: 1.05em;
  opacity: 0.9;
}

body.dark .header {
  background: linear-gradient(135deg, #0ea5e9 0%, #0369a1 100%);
}

.content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
  margin-bottom: 30px;
}

.section {
  background: #ffffff;
  border-radius: 12px;
  padding: 30px;
  box-shadow: 0 4px 16px rgba(0, 102, 204, 0.1);
  border: 1px solid #e0e8f5;
}

body.dark .section {
  background: rgba(15, 23, 42, 0.8);
  border-color: #1f2937;
}

.section h2 {
  font-family: 'Outfit', sans-serif;
  font-size: 1.5em;
  color: #0066cc;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
}

body.dark .section h2 {
  color: #93c5fd;
}

.section h2 i {
  font-size: 1.3em;
}

textarea, input {
  width: 100%;
  padding: 15px;
  border: 2px solid #e0e8f5;
  border-radius: 8px;
  font-family: 'Courier New', monospace;
  font-size: 0.95em;
  margin-bottom: 15px;
  resize: vertical;
}

body.dark textarea, body.dark input {
  background: rgba(0, 0, 0, 0.3);
  border-color: #1f2937;
  color: #e5e7eb;
}

textarea {
  min-height: 200px;
}

.button-group {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
  flex-wrap: wrap;
}

button {
  flex: 1;
  min-width: 120px;
  padding: 12px 20px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  font-size: 0.95em;
  cursor: pointer;
  transition: all 0.3s;
}

.btn-primary {
  background: linear-gradient(135deg, #0066cc 0%, #0052a3 100%);
  color: #ffffff;
  box-shadow: 0 4px 12px rgba(0, 102, 204, 0.2);
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0, 102, 204, 0.3);
}

.btn-secondary {
  background: rgba(0, 102, 204, 0.1);
  color: #0066cc;
  border: 1px solid #0066cc;
}

.btn-secondary:hover {
  background: rgba(0, 102, 204, 0.15);
}

body.dark .btn-secondary {
  color: #93c5fd;
  border-color: #93c5fd;
  background: rgba(147, 197, 253, 0.1);
}

body.dark .btn-secondary:hover {
  background: rgba(147, 197, 253, 0.15);
}

.info-box {
  background: #e3f2fd;
  border-left: 4px solid #0066cc;
  padding: 15px;
  border-radius: 8px;
  margin: 20px 0;
  font-size: 0.9em;
  line-height: 1.6;
}

body.dark .info-box {
  background: rgba(14, 165, 233, 0.1);
  border-color: #0ea5e9;
}

.info-box strong {
  color: #1a1f3a;
}

body.dark .info-box strong {
  color: #ffffff;
}

.output-section {
  grid-column: 1 / -1;
}

.copy-notification {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #22c55e;
  color: white;
  padding: 15px 20px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  animation: slideIn 0.3s ease-out;
  z-index: 1000;
}

@keyframes slideIn {
  from {
    transform: translateX(400px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.error-notification {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #ef4444;
  color: white;
  padding: 15px 20px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  animation: slideIn 0.3s ease-out;
  z-index: 1000;
}

.video-list {
  background: #f5f8fc;
  border-radius: 8px;
  padding: 15px;
  margin-bottom: 15px;
  max-height: 300px;
  overflow-y: auto;
}

body.dark .video-list {
  background: rgba(0, 0, 0, 0.3);
}

.video-item {
  padding: 10px;
  margin-bottom: 10px;
  background: #ffffff;
  border-left: 3px solid #0066cc;
  border-radius: 4px;
  font-size: 0.9em;
  word-break: break-all;
}

body.dark .video-item {
  background: rgba(15, 23, 42, 0.6);
}

.video-item.error {
  border-color: #ef4444;
  background: #fee2e2;
}

body.dark .video-item.error {
  background: rgba(239, 68, 68, 0.1);
}

@media (max-width: 768px) {
  .content {
    grid-template-columns: 1fr;
  }

  .header h1 {
    font-size: 1.5em;
  }

  button {
    min-width: 80px;
    padding: 10px 15px;
    font-size: 0.85em;
  }
}
</style>
</head>

<body>

<button class="theme-toggle" id="themeToggle" title="Alternar tema">
  <i class="fas fa-moon"></i>
</button>

<div class="container">
  <div class="header">
    <h1>üé¨ Conversor de Links</h1>
    <p>Converte os links do YouTube para o formato JSON automaticamente</p>
  </div>

  <div class="content">
    <div class="section">
      <h2><i class="fab fa-youtube"></i> Entrada (Links)</h2>
      
      <div class="info-box">
        <strong>üìù Como usar:</strong><br>
        Cola aqui os links do YouTube, um por linha. Podes incluir a data opcionalmente (separada por |):
        <ul style="margin: 10px 0 0 20px;">
          <li>https://www.youtube.com/watch?v=... | 2026-01-20</li>
          <li>https://www.youtube.com/watch?v=... (usa a data de hoje se n√£o indicares)</li>
        </ul>
      </div>

      <textarea id="inputLinks" placeholder="https://www.youtube.com/watch?v=... | 2026-01-20&#10;https://www.youtube.com/watch?v=... | 2026-01-19&#10;https://www.youtube.com/watch?v=..."></textarea>

      <div class="button-group">
        <button class="btn-primary" onclick="converterLinks()">
          <i class="fas fa-arrow-right"></i> Converter
        </button>
        <button class="btn-secondary" onclick="limparInput()">
          <i class="fas fa-eraser"></i> Limpar
        </button>
      </div>

      <div id="inputValidation"></div>
    </div>

    <div class="section output-section">
      <h2><i class="fas fa-code"></i> Sa√≠da (JSON)</h2>
      
      <div class="info-box">
        <strong>‚úÖ Copia o JSON abaixo:</strong><br>
        Copia o resultado e cola directamente no ficheiro <code>viciado-comenta-videos.json</code>
      </div>

      <textarea id="outputJSON" readonly placeholder="O JSON convertido aparecer√° aqui..."></textarea>

      <div class="button-group">
        <button class="btn-primary" onclick="copiarJSON()">
          <i class="fas fa-copy"></i> Copiar JSON
        </button>
        <button class="btn-secondary" onclick="limparOutput()">
          <i class="fas fa-trash"></i> Limpar
        </button>
      </div>
    </div>
  </div>
</div>

<script>
// Dark mode toggle
function applyTheme(theme) {
  const isDark = theme === 'dark';
  document.body.classList.toggle('dark', isDark);
  const btn = document.getElementById('themeToggle');
  if (btn) btn.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
}

function initTheme() {
  const saved = localStorage.getItem('theme') || 'light';
  applyTheme(saved);
}

document.addEventListener('DOMContentLoaded', () => {
  initTheme();
  const themeBtn = document.getElementById('themeToggle');
  if (themeBtn) {
    themeBtn.addEventListener('click', () => {
      const next = document.body.classList.contains('dark') ? 'light' : 'dark';
      localStorage.setItem('theme', next);
      applyTheme(next);
    });
  }
});

// Extrair ID do YouTube de diferentes formatos
function extrairVideoId(url) {
  url = url.trim();
  
  // Formato: youtube.com/watch?v=ID
  if (url.includes('watch?v=')) {
    return url.split('watch?v=')[1].split('&')[0];
  }
  
  // Formato: youtu.be/ID
  if (url.includes('youtu.be/')) {
    return url.split('youtu.be/')[1].split('?')[0];
  }
  
  // Formato: youtube.com/embed/ID
  if (url.includes('embed/')) {
    return url.split('embed/')[1].split('?')[0];
  }
  
  return null;
}

// Converter links para JSON
function converterLinks() {
  const input = document.getElementById('inputLinks').value.trim();
  const outputArea = document.getElementById('outputJSON');
  const validationArea = document.getElementById('inputValidation');
  
  if (!input) {
    mostrarErro('Por favor, cola alguns links no campo de entrada!');
    return;
  }
  
  const linhas = input.split('\n').filter(line => line.trim().length > 0);
  const videos = [];
  const erros = [];
  const hoje = new Date().toISOString().split('T')[0];
  
  linhas.forEach((linha, index) => {
    const partes = linha.split('|');
    const link = partes[0].trim();
    const data = partes[1] ? partes[1].trim() : hoje;
    
    const videoId = extrairVideoId(link);
    if (videoId) {
      videos.push({
        url: `https://www.youtube.com/watch?v=${videoId}`,
        data: data
      });
    } else {
      erros.push(`Linha ${index + 1}: "${link}" - Formato n√£o reconhecido`);
    }
  });
  
  if (videos.length === 0) {
    mostrarErro('Nenhum link v√°lido encontrado!');
    return;
  }
  
  // Criar JSON ordenado por data (mais recentes primeiro)
  const videosSorted = videos.sort((a, b) => new Date(b.data) - new Date(a.data));
  const jsonOutput = JSON.stringify(videosSorted, null, 2);
  outputArea.value = jsonOutput;
  
  // Mostrar valida√ß√£o
  if (erros.length > 0) {
    let validacaoHTML = '<div class="video-list"><strong style="color:#ef4444;">‚ö†Ô∏è Alertas:</strong>';
    erros.forEach(erro => {
      validacaoHTML += `<div class="video-item error">${erro}</div>`;
    });
    validacaoHTML += `<div style="padding: 10px; font-weight: 600; color: #22c55e;">‚úÖ ${videos.length} v√≠deo(s) convertido(s) com sucesso!</div></div>`;
    validationArea.innerHTML = validacaoHTML;
  } else {
    validationArea.innerHTML = `<div style="padding: 15px; background: #dcfce7; border-radius: 8px; color: #166534; font-weight: 600; border-left: 4px solid #22c55e;">‚úÖ ${videos.length} v√≠deo(s) convertido(s) com sucesso!</div>`;
  }
}

// Copiar JSON para clipboard
function copiarJSON() {
  const textarea = document.getElementById('outputJSON');
  
  if (!textarea.value) {
    mostrarErro('N√£o h√° JSON para copiar! Converte os links primeiro.');
    return;
  }
  
  textarea.select();
  document.execCommand('copy');
  
  // Notifica√ß√£o
  const notif = document.createElement('div');
  notif.className = 'copy-notification';
  notif.textContent = '‚úÖ JSON copiado para clipboard!';
  document.body.appendChild(notif);
  
  setTimeout(() => notif.remove(), 2000);
}

// Mostrar erro
function mostrarErro(mensagem) {
  const notif = document.createElement('div');
  notif.className = 'error-notification';
  notif.textContent = '‚ùå ' + mensagem;
  document.body.appendChild(notif);
  
  setTimeout(() => notif.remove(), 3000);
}

// Limpar input
function limparInput() {
  document.getElementById('inputLinks').value = '';
  document.getElementById('inputValidation').innerHTML = '';
  document.getElementById('inputLinks').focus();
}

// Limpar output
function limparOutput() {
  document.getElementById('outputJSON').value = '';
}
</script>

</body>
</html>
